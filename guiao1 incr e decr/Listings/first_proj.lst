C51 COMPILER V9.60.7.0   FIRST_PROJ                                                        10/06/2023 20:46:32 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE FIRST_PROJ
OBJECT MODULE PLACED IN .\Objects\first_proj.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE first_proj.c OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\first_proj.lst) TABS(2) OBJECT(.\Objects\first_proj.obj)

line level    source

   1          #include <REG51F380.H>
   2          
   3          //atribuição dos botoes a variaveis
   4          // ativos a 0
   5          sbit PB1 = P0^6;
   6          sbit PB2 = P0^7;
   7          
   8          
   9          unsigned int i;
  10          unsigned char button1pressed; //flags se os butoes sao clicados
  11          unsigned char button2pressed;
  12          
  13          // vetor dos dos numeros 16 eletemnos
  14          unsigned char vetor[16] = { 0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8, 0x80, 0x90, 0x88, 0x83, 0xC6, 
             -0xA1, 0x86, 0x8E };
  15          
  16          void init_device(void)
  17          {
  18   1              //WD
  19   1          PCA0MD         = 0x00;
  20   1          // enable cross-bar for I/Os
  21   1          XBR1        = 0x40;
  22   1          FLSCL     = 0x90;
  23   1          CLKSEL    = 0x03;
  24   1      }
  25          
  26           
  27          //DEBOUNCE
  28          unsigned int debounce(bit PB){
  29   1              char window;  
  30   1              unsigned int j;
  31   1          for(j = 0; j < 8; j++) {
  32   2              window = (window << 1) | PB;
  33   2          }
  34   1          return window;
  35   1      }
  36          
  37          
  38          void main()
  39          {
  40   1          init_device();
  41   1          
  42   1          i = 0;
  43   1          button1pressed = 0; //flag se o butao é clicado
  44   1          button2pressed = 0; //flag se o butao é clicado
  45   1      
  46   1          
  47   1          while (1) {
  48   2      
  49   2          // incrementar
  50   2          if(debounce(!PB1) && !button1pressed) {
  51   3                  
  52   3                   if (i < 15) {
  53   4                      i++;
C51 COMPILER V9.60.7.0   FIRST_PROJ                                                        10/06/2023 20:46:32 PAGE 2   

  54   4                  } else {
  55   4                      i = 15;
  56   4                  }
  57   3                  button1pressed = 1;               
  58   3          }   
  59   2            if(!debounce(!PB1)){ // reset a flag se o butao é clicado
  60   3              button1pressed = 0;
  61   3            }
  62   2          // decrementar 
  63   2          if(debounce(!PB2) && !button2pressed) {
  64   3            
  65   3                    if (i > 0) {
  66   4                      i--;
  67   4                  } else {
  68   4                      i = 0;
  69   4                  }
  70   3                  button2pressed = 1;       
  71   3          }
  72   2            if(!debounce(!PB2)){
  73   3              button2pressed = 0;
  74   3            }
  75   2         
  76   2          
  77   2              P2 = vetor[i];
  78   2        }
  79   1              
  80   1          
  81   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    211    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     23    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
