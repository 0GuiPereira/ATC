C51 COMPILER V9.60.7.0   FIRST_PROJ                                                        11/15/2023 17:13:27 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE FIRST_PROJ
OBJECT MODULE PLACED IN .\Objects\first_proj.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE first_proj.c OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\first_proj.lst) TABS(2) OBJECT(.\Objects\first_proj.obj)

line level    source

   1          #include <REG51F380.H>
   2          #include <stdio.h>
   3          #include "serialIO.h"
   4          
   5          
   6          //atribui��o dos botoes a variaveis
   7          // ativos a 0
   8          sbit PB1 = P0^6;
   9          sbit PB2 = P0^7;
  10          
  11          
  12          unsigned int i;
  13          unsigned char button1pressed; //flags se os botoes sao clicados
  14          unsigned char button2pressed;
  15          
  16          // vetor dos dos numeros 16 eletemnos
  17          unsigned char vetor[16] = { 0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8, 0x80, 0x90, 0x88, 0x83, 0xC6, 
             -0xA1, 0x86, 0x8E };
  18          
  19          void init_device(void)
  20          {
  21   1              //WD
  22   1          PCA0MD         = 0x00;
  23   1          // enable cross-bar for I/Os
  24   1          XBR1        = 0x40;
  25   1          FLSCL     = 0x90;
  26   1          CLKSEL    = 0x03;
  27   1      }
  28          
  29          //DEBOUNCE
  30          unsigned int debounce(bit PB){
  31   1              char window;  
  32   1              unsigned int j;
  33   1          for(j = 0; j < 8; j++) {
  34   2              window = (window << 1) | PB;
  35   2          }
  36   1          return window;
  37   1      }
  38          
  39          
  40          void main()
  41          {
  42   1          char c;
  43   1          char code *ptr;
  44   1          Init_Device();
*** WARNING C206 IN LINE 44 OF first_proj.c: 'Init_Device': missing function-prototype
  45   1          uart0_initialize();
  46   1        
  47   1          init_device();
  48   1          
  49   1          i = 0;
  50   1          button1pressed = 0; //flag se o botao � clicado
  51   1          button2pressed = 0; //flag se o botao � clicado
  52   1        
C51 COMPILER V9.60.7.0   FIRST_PROJ                                                        11/15/2023 17:13:27 PAGE 2   

  53   1          EA=1;
  54   1      
  55   1          
  56   1          while (1) {
  57   2          
  58   2          if(uart0_getchar  
  59   2          
  60   2          // incrementar
  61   2          if(debounce(!PB1) && !button1pressed) {
*** ERROR C141 IN LINE 61 OF first_proj.c: syntax error near 'if', expected ','
  62   3                  
  63   3                   if (i < 15) {
  64   4                      i++;
  65   4                  } else {
  66   4                      i = 15;
  67   4                  }
  68   3                  button1pressed = 1;               
  69   3          }   
  70   2            if(!debounce(!PB1)){ // reset a flag se o botao � clicado
  71   3              button1pressed = 0;
  72   3            }
  73   2          // decrementar 
  74   2          if(debounce(!PB2) && !button2pressed) {
  75   3            
  76   3                    if (i > 0) {
  77   4                      i--;
  78   4                  } else {
  79   4                      i = 0;
  80   4                  }
  81   3                  button2pressed = 1;       
  82   3          }
  83   2            if(!debounce(!PB2)){
  84   3              button2pressed = 0;
  85   3            }
  86   2         
  87   2          
  88   2              P2 = vetor[i];
  89   2        }
  90   1              
  91   1          
  92   1      }

C51 COMPILATION COMPLETE.  1 WARNING(S),  1 ERROR(S)
